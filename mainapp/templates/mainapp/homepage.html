{% extends 'mainapp/navbar_footer.html' %}
{% load static %}

{% block title %}EcoPath | Sustainable Cement-Free Road Infrastructure{% endblock %}

{% block extra_head %}
<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<style>
    /* Custom styles */
    .ecopath-card {
        will-change: flex;
    }

    .card-content {
        will-change: transform;
    }

    .heading,
    .description {
        will-change: opacity, max-width, max-height;
    }

    /* Hero Section Styles */
    .hero-slide {
        opacity: 0;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    .text-shadow {
        text-shadow: 0px 2px 8px rgba(0, 0, 0, 0.5);
    }

    .hero-dot {
        background-color: rgba(255, 255, 255, 0.3);
        transition: background-color 0.3s ease;
    }

    .hero-dot.active {
        background-color: rgba(255, 255, 255, 1);
    }

    .hero-nav-item-slot {
        display: inline-block;
    }

    .hero-nav-group {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        /* 24px */
        opacity: 0;
    }
    .no-scrollbar::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Edge, Opera */
      }

    .no-scrollbar {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    }
    #slide-1 {
        background-image: url('{% static 'images/Home hero header.webp' %}');
    }
    
    @media screen and (max-width: 1024px) {
        #slide-1 {
            background-image: url('{% static 'images/Mobile version hero header.webp' %}');
        }
    }

    @media screen and (max-width:400px) {
        #carousel_section {
            height: 110vh !important;
        }
    }
</style>
<script>
    // Custom Tailwind configuration (merging with base if needed, but base already has it. 
    // If this page needs specific config, it might conflict or need to be after base config. 
    // Since base has the same config, we can skip re-declaring it or keep it if it has page-specifics.
    // The file had: custom-green, custom-yellow. Base has custom-green.
    // I will add custom-yellow to the config here or rely on base if I update base.
    // Let's re-declare to be safe for now, or better, just add the missing one.
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'custom-green': '#17411A',
                    'custom-yellow': '#F0ED2F',
                },
                fontFamily: {
                    'montserrat': ['Montserrat', 'sans-serif'],
                    'product-sans': ['Product Sans', 'sans-serif'],
                    'playfair-display': ['Playfair Display', 'serif'],
                    'product-sans-medium' : ['Product Sans Medium', 'sans-serif'],
                },
                fontSize: {
                    'sm': '14px', // 14px
                    'lg': '18px', // 18px
                    '5xl': '48px', // 48px
                }
            }
        }
    }
</script>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div id="carousel-container" class="relative w-full h-screen overflow-hidden text-white">
    <!-- Slides -->
    <div id="slide-2" class="hero-slide absolute top-0 left-0 w-full h-full"
        style="background-image: url('{% static 'images/Hero image 2.webp' %}');">
        <div class="absolute top-0 left-0 w-full h-full bg-black/40 z-10"></div>
        <div class="relative w-full h-full flex items-center justify-start z-20 px-4 sm:px-24 lg:px-48">
            <div class="text-left max-w-4xl p-8 mx-auto">
                <h1 class="text-4xl md:text-6xl font-product-sans text-white/90 text-shadow leading-tight">
                    Let's make green construction the norm, not the exception.</h1>
            </div>
        </div>
    </div>
    <div id="slide-3" class="hero-slide absolute top-0 left-0 w-full h-full"
        style="background-image: url('{% static 'images/Hero image 3.webp' %}');">
        <div class="absolute top-0 left-0 w-full h-full bg-black/40 z-10 text-left"></div>
        <div class="relative w-full h-full flex items-center justify-start z-20 px-4 sm:px-24 lg:px-48">
            <div class="text-left md:max-w-4xl p-8 mx-auto">
                <h1 class="text-4xl md:text-6xl font-product-sans text-white/90 text-shadow leading-tight">We
                    aim to decarbonize the construction industry and make green construction mainstream and affordable.
                </h1>
            </div>
        </div>
    </div>

    <!-- Navigation Container -->
    <div id="nav-container"
        class="absolute bottom-20 left-1/2 -translate-x-1/2 z-30 overflow-hidden bg-white/30 backdrop-blur-md rounded-xl shadow-lg px-2 md:px-10 py-2 min-w-[22rem] md:min-w-[40rem] 2xl:min-w-[42rem]">
        <div class="relative w-full h-[40px] md:h-[48px]">
            <div id="nav-group-1" class="hero-nav-group w-full">
                <span class="hero-nav-item-slot flex-1 text-center font-montserrat font-bold text-black">Road
                    Design</span>
                <span
                    class="hero-nav-item-slot flex-1 text-center font-montserrat font-bold text-black">Sustainability</span>
                <span class="hero-nav-item-slot hidden md:block flex-1 text-center font-montserrat font-bold text-black">Carbon
                    Dioxide</span>
            </div>
            <div id="nav-group-2" class="hero-nav-group w-full">
                <span class="hero-nav-item-slot flex-1 text-center hidden md:block font-montserrat font-bold text-black">Water
                    Saving</span>
                <span class="hero-nav-item-slot flex-1 text-center font-montserrat font-bold text-black">Eco
                    Concrete</span>
                <span class="hero-nav-item-slot flex-1 text-center font-montserrat font-bold text-black">Cement
                    Free</span>
            </div>
            <div id="nav-group-3" class="hero-nav-group w-full">
                <span class="hero-nav-item-slot flex-1 text-center font-montserrat font-bold text-black">Water Saving</span>
                <span class="hero-nav-item-slot flex-1 text-center font-montserrat font-bold text-black">Quality</span>
                <span
                    class="hero-nav-item-slot flex-1 text-center hidden md:block font-montserrat font-bold text-black">Sustainability</span>
            </div>
        </div>
    </div>

    <!-- Dot Indicators -->
    <div id="carousel-dots" class="absolute bottom-4 left-0 w-full z-30 flex justify-center items-center gap-3 p-4">
        <button class="hero-dot w-3 h-3 rounded-full"></button>
        <button class="hero-dot w-3 h-3 rounded-full"></button>
        <button class="hero-dot w-3 h-3 rounded-full"></button>
    </div>
</div>

<section class="mx-auto px-2 xld:px-8 py-16 lg:h-screen flex flex-col justify-center">
    <h2 class="text-4xl md:text-5xl font-product-sans font-black text-custom-green text-center mb-8">Why Roads Need to Change?</h2>
    <div class="flex flex-col lg:flex-row items-center gap-12">
        <!-- Image Collage -->
        <div class="w-full lg:w-1/2 h-64 flex justify-center lg:justify-end items-center">
            <div class="relative w-[25rem] lg:w-[27.5rem] xl:w-[30rem] 2xl:w-[32.5rem] h-48 lg:me-[5rem]">
                <!-- Image 1 -->
                <div class="absolute top-0 left-0 w-32 lg:w-40 h-48 lg:h-60 overflow-hidden group rounded-tr-[3rem] rounded-bl-[3rem]">
                    <div class="relative w-full h-full">
                        <img src="{% static 'images/roads_change(1).webp' %}" alt="High Carbon Emissions"
                            class="w-full h-full object-cover">
                        <div
                            class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 p-6 py-8 flex items-end">
                            <span
                                class="font-montserrat text-[.9rem] text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">High
                                Carbon Emissions</span>
                        </div>
                    </div>
                </div>
                <!-- Image 2 -->
                <div class="absolute top-8 left-[5.5rem] lg:left-[6.5rem] xl:left-[7rem] 2xl:left-[7.5rem]  w-32 lg:w-40 h-48 lg:h-60 overflow-hidden z-10 group rounded-br-[3rem] rounded-tl-[3rem]">
                    <div class="relative w-full h-full">
                        <img src="{% static 'images/roads_change(2).webp' %}" alt="Road Maintenance"
                            class="w-full h-full object-cover">
                        <div
                            class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 p-6 py-8 flex items-start">
                            <span
                                class="font-montserrat text-[.9rem] text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">Road
                                Maintenance</span>
                        </div>
                    </div>
                </div>
                <!-- Image 3 -->
                <div class="absolute top-0 left-[11rem] lg:left-[13rem] xl:left-[14rem] 2xl:left-[15rem] w-32 lg:w-40 h-48 lg:h-60 overflow-hidden z-20 group rounded-tr-[3rem] rounded-bl-[3rem]">
                    <div class="relative w-full h-full">
                        <img src="{% static 'images/roads_change(3).webp' %}" alt="Project Delays"
                            class="w-full h-full object-cover">
                        <div
                            class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 p-6 py-8 flex items-end">
                            <span
                                class="font-montserrat text-[.9rem] text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">Project
                                Delays</span>
                        </div>
                    </div>
                </div>
                <!-- Image 4 -->
                <div class="absolute top-8 left-[16.5rem] lg:left-[19.5rem] xl:left-[21rem] 2xl:left-[22.5rem] h-48 lg:h-60 w-32 lg:w-40 overflow-hidden z-20 group rounded-br-[3rem] rounded-tl-[3rem]">
                    <div class="relative w-full h-full">
                        <img src="{% static 'images/roads_change(4).webp' %}" alt="Rising Costs"
                            class="w-full h-full object-cover">
                        <div
                            class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 p-6 py-8 flex items-start">
                            <span
                                class="font-montserrat text-[.9rem] text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">Rising
                                Costs</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Text Content -->
        <div class="w-full lg:w-1/2 flex justify-start px-4 md:px-0">
            <p class="text-lg text-gray-700 font-montserrat leading-relaxed w-full lg:max-w-[30rem] xl:max-w-[32.5rem] 2xl:w-[37.5rem]">
                Traditional road construction comes with a heavy price — high carbon emissions, constant maintenance,
                rising costs, and endless delays. These challenges not only strain the environment but also slow down
                progress and drain valuable resources. At EcoPath, we set out to change this by rethinking how roads are
                built — faster, greener, and more sustainable for the future.
            </p>
        </div>
    </div>
</section>

<!-- We at EcoPath Section -->
<section class="py-16 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
        <h2 class="text-4xl md:text-5xl font-product-sans font-black text-custom-green mb-12 leading-tight">
            We at EcoPath
        </h2>

        <div id="cards-container"
            class="flex flex-col md:flex-row w-full h-[100vh] md:h-[70vh] rounded-lg overflow-hidden shadow-2xl bg-white gap-y-3 md:gap-y-0 md:gap-x-3">
            <!-- Card 1 -->
            <div class="card flex-1 relative bg-cover bg-center cursor-pointer overflow-hidden group"
                style="background-image: url('{% static 'images/we_at_ecopath (1).webp' %}');">
                <div class="absolute inset-0 bg-black/30 transition-opacity duration-500 group-hover:bg-black/60"></div>

                <!-- Header Group: Number + Title -->
                <div class="header-group absolute flex items-center z-20">
                    <span class="number text-6xl md:text-7xl lg:text-8xl font-black text-white/90 leading-none">1</span>
                    <h2
                        class="heading text-xl font-product-sans md:text-2xl lg:text-3xl font-bold uppercase text-white ml-4 whitespace-nowrap overflow-hidden opacity-0 w-0">
                        Build Roads
                    </h2>
                </div>

                <!-- Description -->
                <p
                    class="description font-montserrat font-medium absolute text-xl md:text-2xl text-white/90 w-full z-10 opacity-0 px-8">
                    We stabilize the soil you already have, no soil is imported, engineering road design for better
                    durability and build roads for life long longevity.
                </p>
            </div>

            <!-- Card 2 -->
            <div class="card flex-1 relative bg-cover bg-center cursor-pointer overflow-hidden group"
                style="background-image: url('{% static 'images/we_at_ecopath (2).webp' %}');">
                <div class="absolute inset-0 bg-black/30 transition-opacity duration-500 group-hover:bg-black/60"></div>

                <div class="header-group absolute flex items-center z-20">
                    <span class="number text-6xl md:text-7xl lg:text-8xl font-black text-white/90 leading-none">2</span>
                    <h2
                        class="heading font-product-sans text-xl md:text-2xl lg:text-3xl font-bold uppercase text-white ml-4 whitespace-nowrap overflow-hidden opacity-0 w-0">
                        Sustainable Solutions
                    </h2>
                </div>

                <p
                    class="description font-montserrat font-medium absolute text-xl md:text-2xl text-white/90 w-full z-10 opacity-0 px-8">
                    Our innovative approach reduces carbon footprint and environmental impact while delivering
                    high-quality, long-lasting road infrastructure.
                </p>
            </div>

            <!-- Card 3 -->
            <div class="card flex-1 relative bg-cover bg-center cursor-pointer overflow-hidden group"
                style="background-image: url('{% static 'images/we_at_ecopath (3).webp' %}');">
                <div class="absolute inset-0 bg-black/30 transition-opacity duration-500 group-hover:bg-black/60"></div>

                <div class="header-group absolute flex items-center z-20">
                    <span class="number text-6xl md:text-7xl lg:text-8xl font-black text-white/90 leading-none">3</span>
                    <h2
                        class="heading text-xl font-product-sans font-medium md:text-2xl lg:text-3xl font-bold uppercase text-white ml-4 whitespace-nowrap overflow-hidden opacity-0 w-0">
                        Future Ready
                    </h2>
                </div>
                <p
                    class="description font-montserrat font-medium absolute text-base text-xl md:text-2xl text-white/90 w-full z-10 opacity-0 px-8">
                    Pioneering the next generation of road construction with cutting-edge technology and sustainable
                    practices for a better tomorrow.
                </p>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const cards = gsap.utils.toArray('.card');
        const container = document.getElementById('cards-container');
        let activeCard = null;
        let mm = gsap.matchMedia();

        // --- COMMON SETUP ---
        const setupCards = () => {
            cards.forEach(card => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');

                gsap.set(headerGroup, {
                    top: '50%',
                    left: '50%',
                    xPercent: -50,
                    yPercent: -50
                });

                gsap.set(description, {
                    top: '60%',
                    left: '50%',
                    xPercent: -50,
                    yPercent: -30,
                    opacity: 0
                });

                gsap.set(heading, { width: 0, opacity: 0 });
            });
        };

        // --- ANIMATION LOGIC ---

        mm.add("(min-width: 1200px) ", () => {
            // DESKTOP: Horizontal Flex
            setupCards();

            const animateInDesktop = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.6, ease: 'power3.inOut' } });

                tl.to(card, { flex: 5 }, 0);
                tl.to(headerGroup, { top: '30%', left: '2rem', xPercent: 0, yPercent: 0 }, 0);
                tl.to(heading, { width: 'auto', opacity: 1, marginLeft: '1rem' }, 0);
                tl.to(description, { top: '60%', opacity: 1 }, 0);
                return tl;
            };

            const animateOutDesktop = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.5, ease: 'power3.inOut' } });

                tl.to(card, { flex: 1 }, 0);
                tl.to(headerGroup, { top: '50%', left: '50%', xPercent: -50, yPercent: -30 }, 0);
                tl.to(heading, { width: 0, opacity: 0, marginLeft: 0 }, 0);
                tl.to(description, { top: '60%', opacity: 0 }, 0);
                return tl;
            };

            // Event Listeners for Desktop
            cards.forEach(card => {
                card.onmouseenter = () => {
                    if (activeCard === card) return;
                    if (activeCard) animateOutDesktop(activeCard);
                    activeCard = card;
                    animateInDesktop(card);
                };
            });

            container.onmouseleave = () => {
                if (activeCard) {
                    animateOutDesktop(activeCard);
                    activeCard = null;
                }
            };

            return () => {
                // Cleanup
                cards.forEach(c => c.onmouseenter = null);
                container.onmouseleave = null;
            };
        });

        mm.add("(min-width: 1200px) and (max-width: 1500px) ", () => {
            // DESKTOP: Horizontal Flex
            setupCards();

            const animateInDesktop = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.6, ease: 'power3.inOut' } });

                tl.to(card, { flex: 5 }, 0);
                tl.to(headerGroup, { top: '30%', left: '2rem', xPercent: 0, yPercent: 0 }, 0);
                tl.to(heading, { width: 'auto', opacity: 1, marginLeft: '1rem' }, 0);
                tl.to(description, { top: '70%', opacity: 1 }, 0);
                return tl;
            };

            const animateOutDesktop = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.5, ease: 'power3.inOut' } });

                tl.to(card, { flex: 1 }, 0);
                tl.to(headerGroup, { top: '50%', left: '50%', xPercent: -50, yPercent: -30 }, 0);
                tl.to(heading, { width: 0, opacity: 0, marginLeft: 0 }, 0);
                tl.to(description, { top: '65%', opacity: 0 }, 0);
                return tl;
            };

            // Event Listeners for Desktop
            cards.forEach(card => {
                card.onmouseenter = () => {
                    if (activeCard === card) return;
                    if (activeCard) animateOutDesktop(activeCard);
                    activeCard = card;
                    animateInDesktop(card);
                };
            });

            container.onmouseleave = () => {
                if (activeCard) {
                    animateOutDesktop(activeCard);
                    activeCard = null;
                }
            };

            return () => {
                // Cleanup
                cards.forEach(c => c.onmouseenter = null);
                container.onmouseleave = null;
            };
        });

        mm.add("(min-width: 768px) and (max-width: 1199px)", () => {
            // DESKTOP: Horizontal Flex
            setupCards();

            const animateInDesktop = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.6, ease: 'power3.inOut' } });

                tl.to(card, { flex: 5 }, 0);
                tl.to(headerGroup, { top: '25%', left: '2rem', xPercent: 0, yPercent: 0 }, 0);
                tl.to(heading, { width: 'auto', opacity: 1, marginLeft: '1rem' }, 0);
                tl.to(description, { top: '70%', opacity: 1 }, 0);
                return tl;
            };

            const animateOutDesktop = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.5, ease: 'power3.inOut' } });

                tl.to(card, { flex: 1 }, 0);
                tl.to(headerGroup, { top: '50%', left: '50%', xPercent: -50, yPercent: -30 }, 0);
                tl.to(heading, { width: 0, opacity: 0, marginLeft: 0 }, 0);
                tl.to(description, { top: '60%', opacity: 0 }, 0);
                return tl;
            };

            // Event Listeners for Desktop
            cards.forEach(card => {
                card.onmouseenter = () => {
                    if (activeCard === card) return;
                    if (activeCard) animateOutDesktop(activeCard);
                    activeCard = card;
                    animateInDesktop(card);
                };
            });

            container.onmouseleave = () => {
                if (activeCard) {
                    animateOutDesktop(activeCard);
                    activeCard = null;
                }
            };

            return () => {
                // Cleanup
                cards.forEach(c => c.onmouseenter = null);
                container.onmouseleave = null;
            };
        });

        mm.add("(max-width: 767px)", () => {
            // MOBILE: Vertical Flex
            setupCards();

            const animateInMobile = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.6, ease: 'power3.inOut' } });

                // Animate flex-grow for vertical expansion
                tl.to(card, { flex: 3 }, 0);

                // Move Number to Top Left (adjusted for smaller screens)
                tl.to(headerGroup, { top: '30%', left: '2rem', xPercent: 0, yPercent: 0 }, 0);

                tl.to(heading, { width: 'auto', opacity: 1, marginLeft: '0.5rem' }, 0);
                tl.to(description, { top: '60%', opacity: 1 }, 0);
                return tl;
            };

            const animateOutMobile = (card) => {
                const headerGroup = card.querySelector('.header-group');
                const description = card.querySelector('.description');
                const heading = card.querySelector('.heading');
                const tl = gsap.timeline({ defaults: { duration: 0.5, ease: 'power3.inOut' } });

                tl.to(card, { flex: 1 }, 0);
                tl.to(headerGroup, { top: '50%', left: '50%', xPercent: -50, yPercent: -30 }, 0);
                tl.to(heading, { width: 0, opacity: 0, marginLeft: 0 }, 0);
                tl.to(description, { top: '60%', opacity: 0 }, 0);
                return tl;
            };

            // Event Listeners for Mobile (Click instead of Hover usually better, but keeping hover logic for consistency if requested, 
            // though click is standard for mobile accordions. Using click here for better UX)
            cards.forEach(card => {
                card.onclick = () => {
                    if (activeCard === card) {
                        // Toggle off if clicking active
                        animateOutMobile(activeCard);
                        activeCard = null;
                    } else {
                        if (activeCard) animateOutMobile(activeCard);
                        activeCard = card;
                        animateInMobile(card);
                    }
                };
            });

            return () => {
                cards.forEach(c => c.onclick = null);
            };
        });
    });
</script>

<!-- Drain Animation Section -->
<section class="py-16 px-4 sm:px-6 lg:px-8 bg-[#E6E6DF]">
    <div class="max-w-7xl mx-auto">
        <div class="flex flex-col md:flex-row md:justify-between gap-8 md:gap-16">
            <!-- Content Column (Left on large screens) -->
            <div class="md:w-1/2 flex justify-start flex-col">
                <h2 class="text-4xl md:text-5xl font-product-sans font-black text-custom-green mb-12 leading-tight">
                    Entire Road Infra Development Under One Roof
                </h2>
                <p class="text-lg font-montserrat mb-12 max-w-3xl">
                    The biggest pain point for delays & losses is multiple vendors & lack of coordination.
                    Eco Path takes care of everything. All concrete products without using cement.
                </p>

                <!-- Navigation List -->
                <div class="flex justify-start">
                    <ul id="infra-nav" class="relative space-y-4 w-full max-w-xs">
                        <!-- Active Item Indicator Bar -->
                        <li id="active-bar"
                            class="absolute left-0 w-1 h-6 bg-custom-green transition-all duration-200 ease-in-out"
                            style="top: 0px;"></li>

                        <!-- List Items -->
                        <li class="nav-item text-lg font-product-sans font-black pl-6 cursor-pointer transition-colors duration-200 hover:text-custom-green"
                            data-index="1">
                            Drain
                        </li>
                        <li class="nav-item text-lg font-product-sans font-black  pl-6 cursor-pointer transition-colors duration-200 hover:text-custom-green"
                            data-index="2">
                            Footpath
                        </li>
                        <li class="nav-item text-lg font-product-sans font-black  pl-6 cursor-pointer transition-colors duration-200 hover:text-custom-green"
                            data-index="3">
                            Sewer Line
                        </li>
                        <li class="nav-item text-lg font-product-sans font-black  pl-6 cursor-pointer transition-colors duration-200 hover:text-custom-green"
                            data-index="4">
                            Electricity Lines
                        </li>
                        <li class="nav-item text-lg font-product-sans font-black  pl-6 cursor-pointer transition-colors duration-200 hover:text-custom-green"
                            data-index="5">
                            Street Lights
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Image Stack (Right on large screens) -->
            <div class="w-full md:w-1/2 2xl:h-[35rem] h-[25rem] flex items-center justify-center mt-8 md:mt-0">
                <!-- Added 'relative' here to ensure absolute children position correctly relative to this container -->
                <div class="image-stack-container w-full h-full relative mx-10 my-10">
                    <img src="{% static 'images/Drain.webp' %}" alt="Drain"
                        class="image-card data-[index='0'] absolute w-[70%] md:w-3/5 h-auto rounded-2xl" data-index="1">
                    <img src="{% static 'images/Footpath.webp' %}" alt="Footpath"
                        class="image-card data-[index='1'] absolute w-[70%] md:w-3/5 h-auto rounded-2xl" data-index="2">
                    <img src="{% static 'images/Sewer Line.webp' %}" alt="Sewer Line"
                        class="image-card data-[index='2'] absolute w-[70%] md:w-3/5 h-auto rounded-2xl" data-index="3">
                    <img src="{% static 'images/Electricity Lines.webp' %}" alt="Electricity Lines"
                        class="image-card data-[index='3'] absolute w-[70%] md:w-3/5 h-auto rounded-2xl" data-index="4">
                    <img src="{% static 'images/Street Lights.webp' %}" alt="Street Lights"
                        class="image-card data-[index='4'] absolute w-[70%] md:w-3/5 h-auto rounded-2xl" data-index="5">
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Drain Animation Script
    document.addEventListener('DOMContentLoaded', () => {
        const navItems = gsap.utils.toArray('.nav-item');
        const imageCards = gsap.utils.toArray('.image-card');
        const activeBar = document.getElementById('active-bar');

        let activeIndex = 0; // Default active item

        // Base Y position for the active card (pushes it to the bottom)
        // 60% allows enough room above for the other cards to stack up without clipping
        const ACTIVE_Y_BASE = 60; 

        const animProps = {
            duration: 0.7,
            ease: 'power3.inOut'
        };

        // Function to update the image stack based on the active index
        function updateActiveState(newIndex) {
            if (newIndex === activeIndex) return; // Do nothing if already active

            // Update active nav item styles
            navItems[activeIndex].classList.remove('text-custom-green');
            navItems[newIndex].classList.add('text-custom-green');

            activeIndex = newIndex;

            // Update Active Bar Immediately
            const activeNavItem = navItems[activeIndex];
            gsap.set(activeBar, {
                top: activeNavItem.offsetTop,
                height: activeNavItem.offsetHeight
            });

            // Apply subtle animation for visual feedback
            gsap.fromTo(activeBar,
                { scaleY: 0.8, opacity: 0.7 },
                {
                    scaleY: 1,
                    opacity: 1,
                    duration: 0.2,
                    ease: 'power2.out'
                }
            );

            // Animate Image Stack
            imageCards.forEach((card, index) => {
                const stackPosition = index - activeIndex;
                const stackPositionAbs = Math.abs(stackPosition);

                if (stackPosition === 0) {
                    // Animate TO Active State (Bottom, Front)
                    gsap.to(card, {
                        zIndex: 10,
                        x: '0%',
                        y: ACTIVE_Y_BASE + '%', // Move to bottom
                        z: 0,
                        rotate: '0deg',
                        scale: 1,
                        ...animProps
                    });
                } else {
                    // Animate TO Inactive State (Staircase Up and Right)
                    gsap.to(card, {
                        zIndex: 5 - stackPositionAbs,
                        x: (stackPositionAbs * 15) + '%', // Move Right
                        y: (ACTIVE_Y_BASE - (stackPositionAbs * 15)) + '%', // Move Up relative to base
                        z: -(stackPositionAbs * 150),
                        scale: 1,
                        ...animProps
                    });
                }
            });
        }

        // Set Initial State
        function setInitialState() {
            // Set bar to first item
            gsap.set(activeBar, {
                top: navItems[0].offsetTop,
                height: navItems[0].offsetHeight
            });

            // Set initial card positions
            imageCards.forEach((card, index) => {
                const stackPosition = index - activeIndex;
                const stackPositionAbs = Math.abs(stackPosition);

                if (stackPosition === 0) {
                    gsap.set(card, {
                        zIndex: 10, 
                        x: '0%', 
                        y: ACTIVE_Y_BASE + '%', // Move to bottom
                        z: 0, 
                        rotate: '0deg', 
                        scale: 1
                    });
                } else {
                    gsap.set(card, {
                        zIndex: 5 - stackPositionAbs,
                        x: (stackPositionAbs * 15) + '%',
                        y: (ACTIVE_Y_BASE - (stackPositionAbs * 15)) + '%', // Move Up
                        z: -(stackPositionAbs * 150),
                        scale: 1
                    });
                }
            });
        }

        // Initialize the component
        setInitialState();

        // Set first nav item as active with custom-green color
        navItems[0].classList.add('text-custom-green');

        // Add Event Listeners
        navItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                updateActiveState(index);
            });
        });
    });
</script>

<!-- Eco Concrete Section -->
<section class="p-8 sm:p-12 md:p-16 flex items-center justify-center">
    <div class="relative w-full lg:w-[80%]  mx-auto">
        <img src="{% static 'images/Eco Concrete Intro Frame.webp' %}" alt="Eco Concrete blocks stacked"
            class="w-full h-auto rounded-xl block hidden md:block">
        <img src="{% static 'images/Eco Concrete Mobile version.png' %}" class="md:hidden w-full max-h-screen object-contain"
            alt="Eco Concrete blocks stacked Mobile version"> 
    </div>
</section>

<!-- GoKart Project Section (carousel of project slides) -->
<section class="relative h-[95vh] md:h-[105vh] lg:h-[95vh] w-full overflow-hidden pt-0" id="carousel_section">
    <div id="gokart-carousel-slides" class="h-full w-full relative">
        {% for banner in home_project_banners %}
        <div class="carousel-slide absolute inset-0 w-full h-full" data-index="{{ forloop.counter0 }}">
            <img src="{{ banner.background_image.url }}" alt="" class="absolute inset-0 w-full h-full object-cover filter blur-sm scale-105">
            <div class="absolute inset-0 bg-black/30"></div>
            <div class="relative z-20 h-[95%] w-full md:w-[95%] mx-auto px-6 flex flex-col items-start justify-center md:justify-start">
                <!-- Full-width Heading Row -->
                <div class="w-full pt-6 md:pt-2 md:h-[15%] md:mt-10 lg:mt-5 items-start md:items-center md:flex py-4 md:pt-6">
                    <h4 class="text-2xl md:text-4xl text-white font-product-sans font-black md:w-[95%]">Projects that Prove Sustainability and Performance Can Coexist</h4>
                </div>

                <!-- Content Row: Middle (60%) and Right (40%) on large screens -->
                <div class="w-full md:flex md:flex-row md:items-center md:gap-8 md:pt-4 lg:pt-6 xl:pt-10 md:h-[80%]">
                    <div class="w-full md:w-3/5">
                        <h2 class="text-4xl md:text-5xl 2xl:text-6xl text-white font-product-sans font-black mb-4">
                            {{ banner.name }}
                        </h2>

                        <div class="space-y-4 text-white md:pr-8">
                            <div>
                                <h5 class="text-xl md:text-2xl font-montserrat font-black mb-2">Scope</h5>
                                <p class="font-product-sans font-black text-md text-white/90">{{ banner.scope }}</p>
                            </div>

                            <div>
                                <h5 class="text-xl md:text-2xl font-montserrat font-black mb-2">Tech Used</h5>
                                <p class="font-product-sans font-black text-md text-white/90">{{ banner.tech_used }}</p>
                            </div>

                            <div>
                                <h5 class="text-xl md:text-2xl font-montserrat font-black mb-2">Performance Impact</h5>
                                <p class="font-product-sans font-black text-md text-white/90">{{ banner.performance_impact }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="w-full md:w-2/5 mt-6 md:mt-0 md:pl-8 flex flex-col gap-6 items-start">
                        <div class="w-full bg-white/20 backdrop-blur-md text-white py-2 px-4 md:p-6 rounded-md shadow-md">
                            <div class="text-3xl font-montserrat font-normal">Cement eliminated</div>
                            <div class="text-2xl font-product-sans font-black mt-2">{{ banner.cement_eliminated }}</div>
                        </div>
                        <div class="w-full bg-white/20 backdrop-blur-md text-white py-2 px-4 md:p-6 rounded-md shadow-md">
                            <div class="text-3xl font-montserrat font-normal">Water saved</div>
                            <div class="text-2xl font-product-sans font-black mt-2">{{ banner.water_saved }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Navigation Arrows -->
    <button id="gokart-prev-btn" class="absolute left-2 md:left-4 top-1/2 -translate-y-1/2 z-20 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full transition-all duration-300 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
    </button>
    <button id="gokart-next-btn" class="absolute right-2 md:right-4 top-1/2 -translate-y-1/2 z-20 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full transition-all duration-300 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
    </button>

    <!-- Dots Navigation -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-20 flex space-x-3">
        {% for banner in home_project_banners %}
        <button class="gokart-dot-btn w-3 h-3 rounded-full bg-white/30 hover:bg-white/50 transition-all duration-300 focus:outline-none" data-index="{{ forloop.counter0 }}"></button>
        {% endfor %}
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('#gokart-carousel-slides .carousel-slide');
            const prevBtn = document.getElementById('gokart-prev-btn');
            const nextBtn = document.getElementById('gokart-next-btn');
            const dotBtns = document.querySelectorAll('.gokart-dot-btn');

            let currentSlide = 0;
            const totalSlides = slides.length;
            let slideInterval;
            const slideDuration = 5000;

            function updateSlide(index) {
                slides.forEach((slide, i) => {
                    if (i === index) {
                        gsap.to(slide, { opacity: 1, duration: 0.5 });
                    } else {
                        gsap.to(slide, { opacity: 0, duration: 0.5 });
                    }
                });

                dotBtns.forEach((dot, i) => {
                    if (i === index) {
                        dot.classList.remove('bg-white/30', 'w-3');
                        dot.classList.add('bg-white', 'w-6');
                    } else {
                        dot.classList.remove('bg-white', 'w-6');
                        dot.classList.add('bg-white/30', 'w-3');
                    }
                });

                currentSlide = index;
            }

            function goToSlide(index) {
                currentSlide = (index + totalSlides) % totalSlides;
                updateSlide(currentSlide);
                resetSlideShow();
            }

            function goToNext() { goToSlide(currentSlide + 1); }
            function goToPrev() { goToSlide(currentSlide - 1); }

            function startSlideShow() { slideInterval = setInterval(goToNext, slideDuration); }
            function resetSlideShow() { clearInterval(slideInterval); startSlideShow(); }

            // Init
            updateSlide(0);
            startSlideShow();

            prevBtn.addEventListener('click', goToPrev);
            nextBtn.addEventListener('click', goToNext);
            dotBtns.forEach(dot => dot.addEventListener('click', () => goToSlide(parseInt(dot.getAttribute('data-index')))));

            const carousel = document.querySelector('#gokart-carousel-slides');
            carousel.addEventListener('mouseenter', () => clearInterval(slideInterval));
            carousel.addEventListener('mouseleave', () => resetSlideShow());

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') goToPrev();
                if (e.key === 'ArrowRight') goToNext();
            });
        });
    </script>
</section>

<!-- Clientele Section -->
<section class="lg:min-h-screen w-100 py-10 md:px-10">
    <div class="w-full h-full bg-[#E6E6DF] py-16 sm:py-24 px-4 sm:px-6 lg:px-8">
        <!-- Top Part: Title + Testimonials -->
        <div class="flex flex-col lg:flex-row gap-12 lg:gap-8">
            <div class="lg:w-2/5 text-center lg:text-left lg:mt-8">
                <p class="font-montserrat text-custom-green font-semibold">CLIENTELE</p>
                <h2 class="text-4xl md:text-5xl font-product-sans font-black text-custom-green mt-4">What people say
                    about us?</h2>
            </div>
            <div class="lg:w-3/5 relative overflow-y-auto pb-4 [&::-webkit-scrollbar]:w-2
                        [&::-webkit-scrollbar-track]:bg-gray-100
                        [&::-webkit-scrollbar-thumb]:bg-gray-300
                        dark:[&::-webkit-scrollbar-track]:bg-neutral-700
                        dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">
                <div class="flex gap-8 flex-nowrap">
                    <div class="testimonial-card flex-shrink-0 w-[90%] sm:w-[25rem] bg-white p-8 rounded-2xl shadow-md">
                        <div class="flex items-start gap-4">
                            <img src="{% static 'images/nagrag.webp' %}" alt="Nagraj"
                                class="w-14 h-14 rounded-full object-cover">
                            <div>
                                <h3 class="font-product-sans font-bold text-lg">Nagraj</h3>
                                <p class="font-montserrat text-sm text-gray-600">Owner Forest by the Hills</p>
                            </div>
                        </div>
                        <p class="font-montserrat text-gray-700 mt-4">
                            "I couldn't be happier with the work Eco Path did for Forest by The Hills in Karjat. We had
                            serious issues with the existing road, but their team came in with innovative solutions and
                            tackled every challenge head-on."
                        </p>
                    </div>
                    <div class="testimonial-card flex-shrink-0 w-[90%] sm:w-[25rem] bg-white p-4 rounded-2xl shadow-md">
                        <div class="flex items-start gap-4">
                            <img src="{% static 'images/nagrag.webp' %}" alt="Nagraj"
                                class="w-14 h-14 rounded-full object-cover">
                            <div>
                                <h3 class="font-product-sans font-bold text-lg">Nagraj</h3>
                                <p class="font-montserrat text-sm text-gray-600">Owner Forest by the Hills</p>
                            </div>
                        </div>
                        <p class="font-montserrat text-gray-700 mt-4">
                            "The new road is not only durable but also environmentally friendly. Their professionalism
                            and commitment to quality are truly commendable. Highly recommended!"
                        </p>
                    </div>
                    <div class="testimonial-card flex-shrink-0 w-[90%] sm:w-[25rem] bg-white p-4 rounded-2xl shadow-md">
                        <div class="flex items-start gap-4">
                            <img src="{% static 'images/nagrag.webp' %}" alt="Nagraj"
                                class="w-14 h-14 rounded-full object-cover">
                            <div>
                                <h3 class="font-product-sans font-bold text-lg">Nagraj</h3>
                                <p class="font-montserrat text-sm text-gray-600">Owner Forest by the Hills</p>
                            </div>
                        </div>
                        <p class="font-montserrat text-gray-700 mt-4">
                            "I couldn't be happier with the work Eco Path did for Forest by The Hills in Karjat. We had
                            serious issues with the existing road, but their team came in with innovative solutions and
                            tackled every challenge head-on."
                        </p>
                    </div>
                    <div class="testimonial-card flex-shrink-0 w-[90%] sm:w-[25rem] bg-white p-4 rounded-2xl shadow-md">
                        <div class="flex items-start gap-4">
                            <img src="{% static 'images/nagrag.webp' %}" alt="Nagraj"
                                class="w-14 h-14 rounded-full object-cover">
                            <div>
                                <h3 class="font-product-sans font-bold text-lg">Nagraj</h3>
                                <p class="font-montserrat text-sm text-gray-600">Owner Forest by the Hills</p>
                            </div>
                        </div>
                        <p class="font-montserrat text-gray-700 mt-4">
                            "I couldn't be happier with the work Eco Path did for Forest by The Hills in Karjat. We had
                            serious issues with the existing road, but their team came in with innovative solutions and
                            tackled every challenge head-on."
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Part: Client Logos -->
        <div class="mt-24 relative overflow-hidden h-20">
            <div class="client-logo-scroller w-max flex items-center h-full gap-x-16 sm:gap-x-24">
                <img src="{% static 'images/client (1).webp' %}" class="client-logo h-12 sm:h-14 w-auto object-contain"
                    alt="Client Logo 1">
                <img src="{% static 'images/client (2).webp' %}" class="client-logo h-14 sm:h-16 w-auto object-contain"
                    alt="Client Logo 2">
                <img src="{% static 'images/client (3).webp' %}" class="client-logo h-10 sm:h-12 w-auto object-contain"
                    alt="Client Logo 3">
                <img src="{% static 'images/client (4).webp' %}" class="client-logo h-16 sm:h-20 w-auto object-contain"
                    alt="Client Logo 4">
                <img src="{% static 'images/client (5).webp' %}" class="client-logo h-12 sm:h-14 w-auto object-contain"
                    alt="Client Logo 5">
                <img src="{% static 'images/client (6).webp' %}" class="client-logo h-14 sm:h-16 w-auto object-contain"
                    alt="Client Logo 6">
                <img src="{% static 'images/client (7).webp' %}" class="client-logo h-10 sm:h-12 w-auto object-contain"
                    alt="Client Logo 7">
                <img src="{% static 'images/client (8).webp' %}" class="client-logo h-16 sm:h-20 w-auto object-contain"
                    alt="Client Logo 8">
                <img src="{% static 'images/client (9).webp' %}" class="client-logo h-12 sm:h-14 w-auto object-contain"
                    alt="Client Logo 9">
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        function createInfiniteScroller(scrollerSelector, itemsSelector, duration, isVertical = false) {
            const scroller = document.querySelector(scrollerSelector);
            if (!scroller) return;

            const items = Array.from(scroller.querySelectorAll(itemsSelector));
            items.forEach(item => scroller.appendChild(item.cloneNode(true)));

            const scrollerWidth = items.reduce((acc, item) => acc + item.offsetWidth + parseInt(getComputedStyle(item).marginRight || 0), 0);

            gsap.to(scroller, {
                x: -scrollerWidth,
                duration: duration,
                ease: 'none',
                repeat: -1,
            });
        }

        createInfiniteScroller('.client-logo-scroller', '.client-logo', 50);

        // Hero Section Animation Logic
        const slides = gsap.utils.toArray(".hero-slide");
        const dots = gsap.utils.toArray(".hero-dot");
        const navGroups = gsap.utils.toArray(".hero-nav-group");
        const totalSlides = slides.length;
        let currentSlide = 0;
        let slideInterval;
        const slideDuration = 4000;
        const fadeDuration = 1;

        function updateIndicators() {
            dots.forEach((dot, index) => {
                dot.classList.toggle("active", index === currentSlide);
            });
        }

        function animateSlides(oldSlideIndex, newSlideIndex) {
            gsap.to(slides[oldSlideIndex], {
                opacity: 0,
                duration: fadeDuration,
                ease: "power1.inOut"
            });
            gsap.to(slides[newSlideIndex], {
                opacity: 1,
                duration: fadeDuration,
                ease: "power1.inOut"
            });

            const oldGroup = navGroups[oldSlideIndex];
            const newGroup = navGroups[newSlideIndex];
            const oldItems = oldGroup.children;
            const newItems = newGroup.children;

            gsap.set(newGroup, { opacity: 1 });

            gsap.to(oldItems, {
                opacity: 0,
                yPercent: () => (Math.random() > 0.5 ? 100 : -100),
                stagger: 0.05,
                duration: fadeDuration * 0.5,
                ease: "power2.in",
                onComplete: () => {
                    gsap.set(oldGroup, { opacity: 0 });
                }
            });

            gsap.fromTo(newItems,
                {
                    opacity: 0,
                    yPercent: () => (Math.random() > 0.5 ? 100 : -100)
                },
                {
                    opacity: 1, // Changed to 1 for black text
                    yPercent: 0,
                    stagger: 0.05,
                    duration: fadeDuration,
                    delay: fadeDuration * 0.2,
                    ease: "power2.out"
                }
            );
        }

        function showNextSlide() {
            const oldSlideIndex = currentSlide;
            currentSlide = (currentSlide + 1) % totalSlides;
            animateSlides(oldSlideIndex, currentSlide);
            updateIndicators();
        }

        function goToSlide(index) {
            if (index === currentSlide) return;
            const oldSlideIndex = currentSlide;
            currentSlide = index;
            animateSlides(oldSlideIndex, currentSlide);
            updateIndicators();
            clearInterval(slideInterval);
            slideInterval = setInterval(showNextSlide, slideDuration);
        }

        gsap.set(slides[currentSlide], { opacity: 1 });
        updateIndicators();

        navGroups.forEach((group, index) => {
            const items = group.children;
            if (index === currentSlide) {
                gsap.set(group, { opacity: 1 });
                gsap.set(items, { opacity: 1, yPercent: 0 }); // Changed to 1 for black text
            } else {
                gsap.set(group, { opacity: 0 });
                gsap.set(items, { opacity: 0, yPercent: 100 });
            }
        });

        dots.forEach((dot, index) => {
            dot.addEventListener("click", () => {
                goToSlide(index);
            });
        });

        slideInterval = setInterval(showNextSlide, slideDuration);
    });    
</script>
{% endblock %}